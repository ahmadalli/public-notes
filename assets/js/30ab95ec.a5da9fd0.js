"use strict";(globalThis.webpackChunkpublic_notes=globalThis.webpackChunkpublic_notes||[]).push([[5417],{4269(e,n,t){t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>c,frontMatter:()=>r,metadata:()=>s,toc:()=>h});const s=JSON.parse('{"id":"tech/home-assistant","title":"Home Assistant","description":"Useful Blueprints","source":"@site/docs/0100-tech/190-home-assistant.md","sourceDirName":"0100-tech","slug":"/tech/home-assistant","permalink":"/tech/home-assistant","draft":false,"unlisted":false,"editUrl":"https://github.com/ahmadalli/public-notes/edit/main/docs/0100-tech/190-home-assistant.md","tags":[],"version":"current","lastUpdatedBy":"ahmadali shafiee","lastUpdatedAt":1770566391000,"sidebarPosition":190,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Android","permalink":"/tech/phone/android"},"next":{"title":"Problems and Questions","permalink":"/problems-and-questions"}}');var o=t(4848),i=t(8453);const r={},a="Home Assistant",l={},h=[{value:"Useful Blueprints",id:"useful-blueprints",level:2},{value:"Device Integrations",id:"device-integrations",level:2},{value:"Toon",id:"toon",level:3},{value:"Reducing the Memory Usage",id:"reducing-the-memory-usage",level:4}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"home-assistant",children:"Home Assistant"})}),"\n",(0,o.jsx)(n.h2,{id:"useful-blueprints",children:"Useful Blueprints"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.a,{href:"https://gist.github.com/Blackshome/6edfec0ff6a25c5da0d07b88dc908238",children:"Blackshome/sensor-light"}),": Automate light based on presence detection, with optional additions like brightness and color temperature control."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.a,{href:"https://github.com/Routout/Blueprints/blob/main/another_styrbar_dimmer.yaml",children:"Routout/Blueprints/another_styrbar_dimmer"}),": IKEA Styrbar control automations supporting light groups and scenes."]}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"device-integrations",children:"Device Integrations"}),"\n",(0,o.jsx)(n.h3,{id:"toon",children:"Toon"}),"\n",(0,o.jsxs)(n.p,{children:["I wanted to keep my data private, so I used ",(0,o.jsx)(n.a,{href:"https://github.com/ToonSoftwareCollective/Root-A-Toon",children:"Root-A-Toon"})," to be able to access my Toon data without the need for a third party."]}),"\n",(0,o.jsxs)(n.admonition,{type:"note",children:[(0,o.jsx)(n.p,{children:"With Toon v1, you need to restart the Toon many times until the Toon tries to fetch the update payload from the fake server deployed on the project. It might take some time, even an hour, but it will work eventually."}),(0,o.jsx)(n.p,{children:"Don't give up hope \ud83d\ude04"})]}),"\n",(0,o.jsxs)(n.p,{children:["To use Home Assistant integrations, I installed the ",(0,o.jsx)(n.code,{children:"BoilerStatus"})," app from the Toon Store."]}),"\n",(0,o.jsx)(n.h4,{id:"reducing-the-memory-usage",children:"Reducing the Memory Usage"}),"\n",(0,o.jsx)(n.admonition,{type:"info",children:(0,o.jsx)(n.p,{children:"Although my Toon has been more stable, I need more time to verify it works in the long run. So this solution is still a work in progress."})}),"\n",(0,o.jsx)(n.p,{children:"After setting up Toon sensors and thermostat integrations in Home Assistant, my Toon was constantly rebooting. I'm forcefully disabling some components which I don't need, as I'm using Home Assistant for these functionalities:"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:["SSH into Toon:","\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-shell",children:"ssh -o HostKeyAlgorithms=+ssh-rsa -o PubkeyAcceptedKeyTypes=+ssh-rsa root@<Toon-ip>\n"})}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["Find the binary locations:","\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-shell",children:"find / -name hdrv_hue\n"})}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["For me it was under ",(0,o.jsx)(n.code,{children:"/qmf/sbin"}),'. I had to move the binaries to "disable" them:',"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-shell",children:"mv /qmf/sbin/hdrv_hue /qmf/sbin/hdrv_hue.disabled\nmv /qmf/sbin/happ_smartplug /qmf/sbin/happ_smartplug.disabled\nmv /qmf/sbin/hcb_bxtproxy /qmf/sbin/hcb_bxtproxy.disabled\n# History related components are not needed as I keep the history in Home Assistant\nmv /qmf/sbin/happ_pwrusage /qmf/sbin/happ_pwrusage.disabled\nmv /qmf/sbin/hcb_rrd /qmf/sbin/hcb_rrd.disabled # this was the biggest culprit in my case\n"})}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["Restart:","\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-shell",children:"shutdown -r now\n"})}),"\n"]}),"\n"]})]})}function c(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},8453(e,n,t){t.d(n,{R:()=>r,x:()=>a});var s=t(6540);const o={},i=s.createContext(o);function r(e){const n=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);